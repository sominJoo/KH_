<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>js - closure</title>
</head>
<body>
    <h1>Funcion-closure</h1>
    <h2>자유변수</h2>
    <script>
        //자유변수 : 함수 지역범위에 정의되지 않은 변수 ( hi )
        var hi = "안녕";
        function greet(name) {
            var word ="반가워";
            console.log(hi + name +word);
        }
        greet("철수");
    </script>


    <h2>closure</h2>
    <input type="button" value="globalCounter" onclick="test1();">
    <input type="button" value="closureCounter" onclick="test2();">
    <script>
        //자유변수
        var test2 = makeClosureCounter();

        function makeClosureCounter() {
            var cnt =0;
            return function () {
                console.log("closureCounter = " + ++cnt);
            }
        }


        //전역변수 cnt
        var cnt = 0;
        function test1() {
            console.log("globalCounter : "+ ++cnt)
        }


        //함수 실행에 필요한 모든 자원(지역, 자유변수)을 가지고 외부로부터 닫혀있는 함수.
        function funX() {
            var num = 100;
            return function () { //이 함수에서는 funX의 지역 변수인 num=100를 자유변수로 가지게 된다.
                console.log('num = ',num);
            }
        }

        var num =200;
        var myf=funX();
        console.log(myf); //ƒ () { console.log('num = ',num); }
        myf();
    </script>



</body>
</html>